print(len(list(filter(lambda c:'byr'in c and'iyr'in c and'eyr'in c and'hgt'in c and'hcl'in c and'ecl'in c and'pid'in c and 1920<=int(c['byr'])<=2002 and 2010<=int(c['iyr'])<=2020 and 2020<=int(c['eyr'])<=2030 and((c['hgt'][-2:]=='cm'and 150<=int(c['hgt'][:-2])<=193)or(c['hgt'][-2:]=='in'and 59<=int(c['hgt'][:-2])<=76))and re.match('^#[0-9a-f]{6}$',c['hcl'])and re.match('^(amb|blu|brn|gry|grn|hzl|oth)$',c['ecl'])and re.match('^\d{9}$',c['pid']),[{f[:3]:f[4:]for f in l}for l in map(str.split,open('day4.txt').read().split('\n\n'))]))))
